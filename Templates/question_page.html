<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Chosen question</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<style>
    table {
        width: 100%;
    }
</style>
    {% with search_phrase=search_phrase, request=request %}
        {% include "topnav.html" %}
    {% endwith %}

<h1>Question id: {{ question_id }}</h1>
    {% for element in tag %}
        {% if element != 'id' %}
            {{ element["name"] }}
        {% endif %}
        <a href="{{ url_for("delete_tag", tag_id=element['id'], question_id=question_id) }}" >[X]</a>
    {% endfor%}
<br><br>
<table border="1">
    <tbody>
    {% for ques in question %}
        <tr>
            {% for element in ques %}
                <td>
                {% if element == "image" %}
                     <a href="{{ url_for('static', filename='uploaded/' + ques["image"]) }}">{{ ques["image"] }}</a>
                {% else %}
                    {{ ques.get(element) }}
                {% endif %}
                </td>
            {% endfor %}
    {% endfor %}
                <td>
                    <a href="{{ url_for("add_comment_to_question", question_id=question_id) }}">Add comment</a>
                </td>
        <tr/>

    </tbody>
</table>
    {% for comment in comments %}
        {% if comment['answer_id'] == None  %}
        <p>

        {% for element in comments_keys %}
                <span>
                    {% if element != '' %}
                        {{ comment[element] }}
                    {% endif %}
        {% endfor %}
                <a href="{{ url_for('edit_comment_to_question', comment_id=comment['id'], question_id=question_id) }}">EDIT</a>
                <a href="{{ url_for("delete_comment", comment_id=comment['id'], question_id=question_id) }}">DELETE</a>
                </span>
        </p>
        {% endif %}
    {% endfor %}
<br><br>
<a href="{{ url_for("edit_question_get", question_id=question_id) }}">Edit question</a>
<br><br>
<a href="{{ url_for("add_tag_to_question", question_id=question_id) }}">Add tag</a>
<br><br>
<a href="{{ url_for("question_delete", question_id=question_id) }}">Delete question</a>
<br>
<h1>Answers</h1>
<a href="{{ url_for("add_user_answer_post", question_id=question_id) }}">Add answer</a>
<br>
<br>

<table border="1">
    <thead>
    <tr>
        {% for element in answers_keys %}
            {% if element == "message" or element == "image" %}
                <th>
                    {{ element }}
                </th>
            {% elif element == 'vote_number' %}
                <th style="width: 3%">vote number</th>
            {% endif %}
        {% endfor %}
    </tr>
    </thead>
    <tbody>
    {% for answer in answers %}
        <tr>
            {% for element in answers_keys %}
                {% if element != "vote_number" %}
                    {% if element == "message" %}
                        <td style="text-align:center">{{ answer[element] }}</td>
                    {% endif %}
                {% endif %}
            {% endfor %}

            <td>
                <a href="{{ url_for('static', filename='uploaded/' + answer["image"]) }}">{{ answer["image"] }}</a>
            </td>
            <td style="text-align:center">
                {{ answer["vote_number"] }}
            </td>
            <td>
                <a href="{{ url_for ("answer_vote_up", answer_id=answer['id'], question_id=question_id) }}">&#128077;</a>
            </td>
            <td>
                <a href="{{ url_for("answer_vote_down", answer_id=answer['id'], question_id=question_id) }}">&#128078;</a>
            </td>
            <td>
                <a href="{{ url_for("delete_answer", answer_id=answer['id'], question_id=question_id) }}">Delete answer</a>
            </td>
            <td>
                <a href="{{ url_for("edit_answer_get",answer_id=answer['id'], question_id=question_id)}}">Edit answer</a>
            </td>
            <td>
                <a href="{{ url_for("add_comment_to_answer", answer_id=answer['id'], question_id=question_id) }}">Add comment</a>
            </td>
    <td>
        {% for comment in comments %}
                {% if comment['answer_id'] == answer['id']  %}
                    <p>

                    {% for element in comments_keys %}
                            <span>
                                {% if element != '' %}
                                    {{ comment[element] }}
                                {% endif %}
                    {% endfor %}
                            <a href="{{ url_for('edit_comment_to_answer', comment_id=comment['id'], answer_id=answer_id) }}">EDIT</a>
                            <a href="{{ url_for("delete_comment", comment_id=comment['id'], question_id=question_id) }}">DELETE</a>
                            </span>
                    </p>
                {% endif %}
            {% endfor %}
        </td>
    {% endfor %}

        </tr>
    </tbody>
</table>
<br><br>

</body>
</html>
